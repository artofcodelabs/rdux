sqlite: &sqlite
  adapter: sqlite3
  pool: <%= ENV.fetch("RAILS_MAX_THREADS") { 5 } %>
  timeout: 5000

postgres: &postgres
  adapter: postgresql
  encoding: unicode
  pool: <%= ENV.fetch("RAILS_MAX_THREADS") { 5 } %>
  username: postgres
  password: mypassword
  host: 127.0.0.1
  port: 5432

development:
  primary:
    <<: *sqlite
    database: db/dev.sqlite3
  secondary:
    <<: *postgres
    database: dev_postgres

test:
  <% if ENV["DB"] == "sqlite" %>
    <<: *sqlite
    database: db/test.sqlite3
  <% elsif ENV["DB"] == "postgres" %>
    <<: *postgres
    database: test_postgres
  <% else %>
    primary:
      <<: *sqlite
      database: db/test.sqlite3
    secondary:
      <<: *postgres
      database: test_postgres
  <% end %>
